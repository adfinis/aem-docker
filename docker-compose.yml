version: "3"

services:
  publisher:
    build:
      context: ./
      dockerfile: publisher.dockerfile
    image: aem-publisher:latest
    ports:
     - "4503:4503"
  author:
    build:
      context: ./
      dockerfile: author.dockerfile
    image: aem-author:latest
    links:
     - publisher
    ports:
     - "4502:4502"
  dispatcher:
    image: aem-dispatcher
    links:
      - publisher
    ports:
      - "80:80"
      - "443:443"
